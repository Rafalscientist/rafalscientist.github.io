{% include base_path %}

{% if page.author and site.data.authors[page.author] %}
  {% assign author = site.data.authors[page.author] %}
{% else %}
  {% assign author = site.author %}
{% endif %}

<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    {% if author.avatar contains "://" %}
    	<img src="{{ author.avatar }}" alt="{{ author.name }}"  fetchpriority="high" />
    {% else %}
    	<img src="{{ author.avatar | prepend: "/images/" | prepend: base_path }}" class="author__avatar" alt="{{ author.name }}"  fetchpriority="high" />
    {% endif %}
  </div>

  <div class="author__content">
    <h3 class="author__name">{{ author.name }}</h3>
    {% if author.pronouns %}<p class="author__pronouns">{{ author.pronouns }}</p>{% endif %}
    {% if author.bio %}<p class="author__bio">{{ author.bio }}</p>{% endif %}
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
      <!-- 1. LOKALIZACJA (PWr) - WYMUSZENIE LINII -->
      {% if author.location %}
        <li class="author__desktop" style="display: flex !important; align-items: center !important; margin-bottom: 8px !important;">
          <img src="{{ '/images/logopwr.png' | relative_url }}" 
               style="width: 18px; height: 18px; margin-right: 10px; mix-blend-mode: multiply !important; flex-shrink: 0;">
          <span style="white-space: nowrap !important;">{{ author.location }}</span>
        </li>
      {% endif %}

      <!-- 2. PRACODAWCA (IFT) - WYMUSZENIE LINII + KONTRAST -->
      {% if author.employer %}
        <li class="author__desktop" style="display: flex !important; align-items: center !important; margin-bottom: 8px !important;">
          <style>
            .img-ift-atom { filter: drop-shadow(0px 0px 1px rgba(0,0,0,0.8)) drop-shadow(0px 0px 2px rgba(0,0,0,0.3)) !important; }
            html[data-theme='dark'] .img-ift-atom { filter: none !important; }
          </style>
          <img src="{{ '/images/logoift.png' | relative_url }}" 
               class="img-ift-atom"
               style="width: 18px; height: 18px; margin-right: 10px; flex-shrink: 0;">
          <span style="white-space: nowrap !important;">{{ author.employer }}</span>
        </li>
      {% endif %}

      <!-- 3. ACADEMIA - INTELIGENTNY FILTR NOCNY -->
      {% if author.academia %}
        <li style="display: flex !important; align-items: center !important;">
          <a href="{{ author.academia }}" target="_blank" rel="noopener noreferrer" style="display: flex !important; align-items: center !important; color: inherit; text-decoration: none;">
            <style>
              html[data-theme='dark'] .img-ac-atom { filter: invert(1) brightness(2) !important; }
            </style>
            <img src="{{ '/images/logoac.svg' | relative_url }}" 
                 class="img-ac-atom"
                 style="width: 17px; height: 17px; margin-right: 10px; filter: none !important;">
            <span>Academia</span>
          </a>
        </li>
      {% endif %}

      <!-- 4. ORCID -->
      {% if author.orcid %}
        <li style="display: flex !important; align-items: center !important;">
          <a href="{{ author.orcid }}" target="_blank" rel="noopener noreferrer" style="display: flex !important; align-items: center !important; color: inherit; text-decoration: none;">
            <img src="{{ '/images/logoorcid.svg' | relative_url }}" 
                 style="width: 17px; height: 17px; margin-right: 10px; filter: none !important;">
            <span>ORCID</span>
          </a>
        </li>
      {% endif %}

      <!-- 5. RESEARCHGATE -->
      {% if author.researchgate %}
        <li style="display: flex !important; align-items: center !important;">
          <a href="{{ author.researchgate }}" target="_blank" rel="noopener noreferrer" style="display: flex !important; align-items: center !important; color: inherit; text-decoration: none;">
            <img src="{{ '/images/logorg.svg' | relative_url }}" 
                 style="width: 17px; height: 17px; margin-right: 10px; filter: none !important;">
            <span>ResearchGate</span>
          </a>
        </li>
      {% endif %}

    </ul>
  </div>
</div>

<style>
  /* GLOBALNA NAPRAWA HOVERA DLA SIDEBARA */
  .author__urls-wrapper a:hover { 
    color: #16a085 !important; 
  }
  .author__urls-wrapper a:hover span { 
    color: #16a085 !important; 
  }
  /* Blokada zmiany koloru dla obrazk√≥w przy najechaniu */
  .author__urls-wrapper a:hover img { 
    filter: inherit !important; 
    opacity: 1 !important; 
  }
</style>
