<script src="unpkg.com" crossorigin="anonymous"></script>

<script>
  // Funkcja inicjująca, wywoływana dopiero gdy strona jest gotowa
  window.onload = function() {
    console.log("Próba inicjalizacji globusa...");
    
    const elem = document.getElementById('globeViz');
    
    if (!elem) {
      console.error("BŁĄD: Nie znaleziono kontenera #globeViz!");
      return;
    }

    const myData = [
      { city: "Münster", lat: 51.96, lng: 7.62, events: [{ name: "NOEKS 15", id: "noeks-15", nr: "15" }] },
      { city: "Kraków", lat: 50.06, lng: 19.94, events: [{ name: "Konferencja", id: "krakow-2024", nr: "12" }] },
      { city: "Warszawa", lat: 52.22, lng: 21.01, events: [{ name: "Theory Day", id: "warsaw-2021", nr: "3" }] }
    ];

    try {
      const world = Globe()(elem)
        .globeImageUrl('unpkg.com')
        .backgroundColor('rgba(0,0,0,0)') // Przezroczyste tło, by pasowało do czarnego div
        .pointsData(myData)
        .pointColor(() => '#ffffff')
        .pointRadius(0.7)
        .pointLabel(d => `<div style="background:rgba(0,0,0,0.8);padding:5px;border-radius:3px;color:white">${d.city}</div>`)
        .pointOfView({ lat: 52, lng: 19, altitude: 2 }, 0);

      // Dopasowanie rozmiaru
      world.width(elem.offsetWidth);
      world.height(elem.offsetHeight);
      
      console.log("Globus powinien być widoczny.");
    } catch (err) {
      console.error("Błąd silnika Globe.gl:", err);
    }
  };
</script>
